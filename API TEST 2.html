<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>邮箱查找工具 - Hunter.io API</title>
    <link rel="stylesheet" href="static/css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>🔍 邮箱查找工具</h1>
            <p>使用 Hunter.io API 查找公司域名的邮箱地址</p>
        </header>

        <div class="main-content">
            <!-- API密钥设置 -->
            <div class="card api-card">
                <h2>🔑 API 密钥设置</h2>
                <div class="form-group">
                    <label for="apiKey">Hunter.io API 密钥:</label>
                    <div class="api-input-group">
                        <input type="password" id="apiKey" placeholder="输入你的 Hunter.io API 密钥" class="form-control">
                        <button onclick="toggleApiKeyVisibility()" class="btn-icon" title="显示/隐藏密钥">
                            <span id="toggleIcon">👁️</span>
                        </button>
                    </div>
                    <div class="api-actions">
                        <button onclick="saveApiKey()" class="btn btn-small btn-primary">保存密钥</button>
                        <button onclick="clearApiKey()" class="btn btn-small btn-secondary">清除密钥</button>
                        <button onclick="testApiKey()" class="btn btn-small btn-info">测试连接</button>
                    </div>
                    <small>
                        <span id="apiStatus" class="api-status"></span>
                        <br>
                        获取密钥: <a href="https://hunter.io/api" target="_blank">https://hunter.io/api</a> | 
                        <a href="https://hunter.io/api-keys" target="_blank">管理密钥</a>
                    </small>
                </div>
                <div class="api-info">
                    <p><strong>说明：</strong></p>
                    <ul>
                        <li>密钥将安全保存在浏览器本地存储中</li>
                        <li>关闭浏览器后密钥仍会保留</li>
                        <li>密钥不会上传到服务器或保存在文件中</li>
                        <li>如需更换密钥，点击"清除密钥"后重新输入</li>
                    </ul>
                </div>
            </div>

            <!-- 单个域名查找 -->
            <div class="card">
                <h2>单个域名查找</h2>
                <div class="form-group">
                    <label for="singleDomain">域名或网址:</label>
                    <input type="text" id="singleDomain" placeholder="例如: example.com 或 https://www.example.com" class="form-control">
                </div>
                <div class="form-group">
                    <label for="companyName">公司名称 (可选):</label>
                    <input type="text" id="companyName" placeholder="例如: Example Inc." class="form-control">
                </div>
                <div class="form-group">
                    <label for="emailLimit">邮箱数量限制:</label>
                    <input type="number" id="emailLimit" value="10" min="1" max="100" class="form-control">
                </div>
                <button onclick="searchSingle()" class="btn btn-primary">查找邮箱</button>
            </div>

            <!-- 批量查找 -->
            <div class="card">
                <h2>批量域名查找</h2>
                <div class="form-group">
                    <label for="batchInput">域名列表 (每行一个):</label>
                    <textarea id="batchInput" rows="5" placeholder="example1.com
example2.com
https://example3.com" class="form-control"></textarea>
                </div>
                <div class="form-group">
                    <label>或上传文件 (CSV/TXT):</label>
                    <input type="file" id="csvFile" accept=".csv,.txt" class="form-control">
                    <small>
                        支持格式：<br>
                        • CSV: company_name, domain/website<br>
                        • TXT: JSON格式 [{"company_name": "公司名", "website": "网址"}]
                    </small>
                </div>
                <button onclick="searchBatch()" class="btn btn-primary">批量查找</button>
            </div>

            <!-- 结果显示区域 -->
            <div id="results" class="card" style="display: none;">
                <h2>查找结果</h2>
                <div id="resultContent"></div>
                <div class="actions">
                    <button onclick="downloadInstantlyCSV()" class="btn btn-primary">下载 Instantly 格式</button>
                    <button onclick="downloadFullCSV()" class="btn btn-secondary">下载完整 CSV</button>
                    <button onclick="downloadJSON()" class="btn btn-secondary">下载 JSON</button>
                    <button onclick="clearResults()" class="btn btn-secondary">清除结果</button>
                </div>
                <div class="format-info">
                    <small>
                        <strong>Instantly格式</strong>：Email, First Name, Last Name, Company Name, Phone, Job Title, Country<br>
                        <strong>完整CSV</strong>：包含所有字段和置信度信息
                    </small>
                </div>
            </div>

            <!-- 加载提示 -->
            <div id="loading" class="loading" style="display: none;">
                <div class="spinner"></div>
                <p>正在查找邮箱...</p>
            </div>
        </div>

        <footer>
            <p>© 2025 邮箱查找工具 | 基于 Hunter.io API</p>
        </footer>
    </div>

    <script src="parse_json_alternative.js"></script>
    <script src="static/js/app.js"></script>
</body>
</html>